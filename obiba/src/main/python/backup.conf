
#The configuration settings for the obiba backup tool. A single script can be used to backup
#multiple projects (e.g. opal, mica, agate) on the same server. After backing up locally, the files
#can also be backed up to a remote server.
#Do not include trailing "/" on any folder paths
keep: #Default cleanup schedule
  days: 3 #Number of rotating day backups to keep per month
  dates: [03,08,13,18,23,28] #Optional comma seperated list of dates to keep per month 
  month: 2 #Number of month backups to keep per year
destination: /tmp/backups/obiba #Local backup destination
projects:
  web-dc1-opal-p1: #Optional multiple projects supported
    keep: #Optional project specific cleanup schedule
      days: 1
      dates: [] #Use empty list to over-ride default
      month: 1
    files: [/root/Documents/test.txt] #Optional comma seperated list of individual files to backup
    folders: #Comment
      - folder:
          path: /root/Documents/opal_import
          excludes: [taxonomies/mlstr_taxonomy,/table_definitions]
      - folder:
          path: /root/Documents/mica_import
      - folder:
          path: /root/Documents/opal_python
    #mongodbs: #Optional. Mongodump 
      #names: [mica] #Comma seperated list of database names
      ##Assume all databases have the same connection and security settings
      ##Comment out any settings that are not required
      #host: localhost
      #port: 27017
      #usr: micaadmin #User with correct permissons to perform mongodump
      #pwd: 'Password' #Password of the above user
      #authenticationDatabase: admin #The mongo database used to authenticate users
      #output: archive #Dump to a single archive file (comment out to dump to folder)
      #sslPEMKeyFile: /path/to/PEMkeyFile #Comment out if SSL is not required
#    databases: #Optional. Dump MySQL database(s) to archive file
#      prefix: 'live%'
#      usr: zorro
#      pwd: '1234'
rsyncs: #Non-project folders to backup remotely
  - folder:
      path: /root/Documents/opal_import
      excludes: [/taxonomies/mlstr_taxonomy,/table_definitions]
#  - folder:
#      path: /etc/opal/crowd
rsync: # Copy local backup folder 'destination' to remote server
  destination: /media/sf_host_shared #Remote server destination
  encrypt_files: 
    encryptionPassword: encrypt1234 #requires gpg (https://gpgtools.org/) to be installed. To decrypt a file in the commandline use "gpg --output OUTPUTFILENAME --passphrase PASSWORD --decrypt ENCRYPTEDFILENAME`"  
    remove_source_files: true #If encrypting files do you want to remove the locally encrypted file after it has been copied
#  destination: /backups/db-dc1-opal-p1 #Remote server destination
#  pem: /home/patae/.ssh/obiba-backup.pem #SSL certificate to create secure connection to remote server
  rsync_projects:
    keep:
      days: 3 #Number of rotating day backups to keep per month
      dates: [03,13,23] #Optional comma seperated list of dates to keep per month 
      month: 4 #Number of month backups to keep per year

##Do not include trailing "/" on any folder paths
#keep:
  #days: 5 #Number of day backups to keep per month
  #month: 2 #Number of month backups to keep per year
#destination: /tmp/backups/obiba
#rsyncs:
  #- folder:
      #path: /var/lib/opal
      #excludes: [/work, /data]
  #- folder:
      #path: /etc/opal/crowd
#projects:
  #mica:
    ##Override the default keep settings
    #keep:
      #days: 1 #Number of day backups to keep per month
      #month: 1 #Number of month backups to kkep per year
    ##Comma seperated list of individual files to backup
    #files: [/media/sf_host_shared/DELETE/pa_3c.sav, /media/sf_host_shared/mica_structure/alspac-seed.zip]
    ##Comma seperated list of folders
    #folders: [/root/Documents/opal_import, /var/lib/opal/data]
    ##Comment out this whole section if MondoDB is not used for this project
    ##mongodbs:
      ###Comma seperated list of database names
      ##names: [mica]
      ###Assume all databases have the same connection and security settings
      ###Comment out any settings that are not required
      ##host: db-dc1-opal-p0.epi.bris.ac.uk
      ##port: 27017
      ##usr: micaadmin
      ##pwd: ''
      ##authenticationDatabase: admin
      ##output: archive
##      sslPEMKeyFile: /path/to/PEMkeyFile
    ##Comment out this whole section if MySQL is not used for this project
##    databases:
##      prefix: 'opal%'
##      usr: opaladmin
##      pwd: 'password'
#rsync:
  #destination: /backups/db-dc1-opal-p0
##  pem: /home/patae/.ssh/obiba-backup.pem
  #rsync_projects:
    #keep:
      #days: 5 #Number of day backups to keep per month
      #month: 2 #Number of month backups to keep per year
  #encrypt_files: #requires gpg (https://gpgtools.org/) to be installed
